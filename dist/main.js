(()=>{"use strict";let e=!1;const t=()=>{const e=document.querySelectorAll(".popup");for(let t=0;t<e.length;t++)e[t].style.display=""},o=o=>{const n=document.getElementById(o),l=n.querySelectorAll("input");document.body.addEventListener("click",(o=>{const{target:n}=o;(n.closest(".close-form")||n.closest(".overlay"))&&t(),n.closest(".club")&&(e=!0)})),n.addEventListener("submit",(o=>{o.preventDefault();const{target:s}=o,c=document.createElement("div");if(!1===(t=>{let o=!0;for(let n of t){if("name"===n.name&&!1===/^[А-я]{0,32}$/.test(n.value)){alert('Поле "имя" заполнено неправильно'),o=!1;break}if("phone"===n.name&&!1===/^\+?7[0-9]{3}[0-9]{7}$/.test(n.value)){alert('Поле "телефон" заполнено неправильно'),o=!1;break}if("checkbox"===n.type&&!1===n.checked){alert("Вы не дали право на обработку данных"),o=!1;break}if("radio"===n.type&&!e){alert("Выберите клуб"),o=!1;break}}return o})(l))return;const r=new FormData(n),a={};r.forEach(((e,t)=>{a[t]=e})),n.appendChild(c),c.style.color="white",c.style.marginTop="20px",c.textContent="Отправка...",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}))(a).then((e=>{if(200!==e.status)throw new Error("network status not 200");c.textContent="Данные успешно отправлены";let o=setTimeout((()=>{t(),clearTimeout(o)}),2e3)})).catch((e=>{c.textContent="Ошибка! Данные не отправлены",console.error(e)})).finally((()=>{n.reset()}))}))};let n;const l=(e,t)=>{let o,l=0;!0===t&&(o=document.querySelectorAll(".gallery-slider .dot"));const d=()=>{n=setInterval((()=>{s(e[l]),!0===t&&r(o[l]),l++,l>e.length-1&&(l=0),c(e[l]),!0===t&&a(o[l])}),2500)};if(d(),!0===t){const t=e[0].parentNode;o.forEach(((t,n)=>t.addEventListener("click",(t=>{t.target.matches(".dot-active")||(s(e[l]),r(o[l]),l=n,c(e[l]),a(o[l]))})))),t.addEventListener("mouseover",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&d()})),t.addEventListener("click",(t=>{t.target.closest(".arrow-left")&&(s(e[l]),r(o[l]),l--,l<0&&(l=e.length-1),c(e[l]),a(o[l])),t.target.closest(".arrow-right")&&(s(e[l]),r(o[l]),l++,l>e.length-1&&(l=0),c(e[l]),a(o[l]))}))}},s=e=>{e.style.display="none"},c=e=>{e.style.display="flex"},r=e=>{e.classList.remove("dot-active")},a=e=>{e.classList.add("dot-active")},d={monthPay:{oneMonth:2999,sixMonth:14990,nineMonth:21990,twelfth:24990}},i={monthPay:{oneMonth:1999,sixMonth:9900,nineMonth:13900,twelfth:19900}};let m=i.monthPay.oneMonth,u=i,y=1;const h=document.getElementById("price-total");h.textContent=m;const p=(e,t)=>{switch(e){case 1:m=t.monthPay.oneMonth,y=1;break;case 6:m=t.monthPay.sixMonth,y=6;break;case 9:m=t.monthPay.nineMonth,y=9;break;case 12:m=t.monthPay.twelfth,y=12}h.textContent=m};(()=>{const e=document.getElementById("totop");window.addEventListener("scroll",(()=>{window.scrollY>=740?e.style.display="block":e.style.display=""}))})(),(()=>{const e=document.querySelector(".top-menu .menu-button"),t=document.querySelector(".top-menu"),o=document.querySelector(".popup-menu");window.screen.availWidth<768&&(e.classList.remove("hidden-large"),e.addEventListener("click",(()=>{o.style.display="flex"})),o.addEventListener("click",(e=>{(e.target.closest(".close-menu-btn")||e.target.closest("li"))&&(o.style.display="none")})),window.addEventListener("scroll",(()=>{window.scrollY>=185?t.classList.add("posFixed"):t.classList.remove("posFixed")})))})(),(()=>{const e=document.querySelector(".head"),t=e=>{e.style.display?e.style.display="":e.style.display="block"};e.addEventListener("click",(e=>{const{target:o}=e;if(o.matches(".clubs-list p")&&(e=>{for(let o of e)"UL"===o.tagName&&t(o)})(o.parentNode.children),o.closest(".free-visit")){const e=document.getElementById("free_visit_form");t(e)}if(o.closest(".callback-btn")){const e=document.getElementById("callback_form");t(e)}})),document.body.addEventListener("click",(e=>{if(e.target.closest(".fixed-gift")){const o=document.getElementById("gift");t(o),e.target.style.display="none"}}))})(),document.querySelectorAll(".popup form").forEach((e=>{o(e.id)})),(()=>{const e=document.getElementById("banner-form");o(e.id)})(),(()=>{const e=document.getElementById("footer_form");o(e.id)})(),(()=>{const e=document.querySelector(".main-slider").children;l(e)})(),(()=>{const e=document.querySelectorAll(".gallery-slider .slide");for(let t of e)t.style.display="none";e[0].style.display="block",(e=>{const t=document.querySelector(".gallery-slider .dots");for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.append(e)}t.children[0].classList.add("dot-active")})(e),l(e,!0)})(),(()=>{const e=document.getElementById("card_order"),t=e.querySelectorAll("input");e.addEventListener("click",(e=>{var t,o;t=e.target,o=u,t.closest(".time input")&&p(+t.value,o),(e=>{e.closest(".club")&&(u="mozaika"===e.value?i:d,p(y,u))})(e.target)})),e.addEventListener("submit",(e=>{e.preventDefault(),(e=>{for(let t of e)t.name.contains("name"),t.name.contains("tel"),t.id.contains("card_check"),t.name.contains("promo")&&"body2020"===t.value&&(m*=.3,h.textContent=m)})(t)}))})()})();
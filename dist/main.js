(()=>{"use strict";const e={schelkovo:{monthPay:{oneMonth:2999,sixMonth:14990,nineMonth:21990,twelfth:24990}},mozaika:{monthPay:{oneMonth:1999,sixMonth:9900,nineMonth:13900,twelfth:19900}},promocode:"ТЕЛО2020"};let t,o=e.mozaika.monthPay.oneMonth,n=e.mozaika,l=1,s=0,r=!1;const a=document.getElementById("card_order");for(let e of a)"promo"===e.name&&(t=document.getElementById("price-total"),t.textContent=o);const c=(e,n)=>{switch(e){case 1:o=n.monthPay.oneMonth,l=1;break;case 6:o=n.monthPay.sixMonth,l=6;break;case 9:o=n.monthPay.nineMonth,l=9;break;case 12:o=n.monthPay.twelfth,l=12}t.textContent=o},d=()=>{const e=document.querySelectorAll(".popup");for(let t=0;t<e.length;t++)e[t].style.display=""},i=()=>{document.querySelector('input[name="promo"]').value===e.promocode&&!1===r?(o*=.7,t.textContent=Math.floor(o),r=!0):(r=!1,c(l,n))},m=e=>{const t=document.getElementById(e),o=t.querySelectorAll("input");document.body.addEventListener("click",(e=>{const{target:t}=e;(t.closest(".close-form")||t.closest(".overlay")||t.closest(".close-btn"))&&d()})),t.addEventListener("input",(e=>{"promo"===e.target.name&&i()})),t.addEventListener("submit",(e=>{e.preventDefault();const{target:n}=e,l=document.createElement("div");if(!(e=>{let t=!0;for(let o of e){if("name"===o.name&&!1===/^[А-я]{2,32}$/.test(o.value)){alert('Поле "имя" заполнено неправильно'),t=!1;break}if("phone"===o.name&&!1===/^\+?7[0-9]{3}[0-9]{7}$/.test(o.value)){alert('Поле "телефон" заполнено неправильно'),t=!1;break}if("checkbox"===o.type&&!1===o.checked){alert("Вы не дали право на обработку данных"),t=!1;break}if("radio"===o.type&&"club-name"===o.name&&(!1===o.checked&&(s+=1),2===s)){alert("Выберите клуб"),t=!1,s=0;break}}return t})(o))return;s=0;const r=new FormData(t),a={};r.forEach(((e,t)=>{a[t]=e})),t.appendChild(l),l.style.color="red",l.style.marginTop="20px",l.textContent="Отправка...",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}))(a).then((e=>{if(200!==e.status)throw new Error("network status not 200");l.textContent="Данные успешно отправлены";let t=setTimeout((()=>{d(),l.textContent="",clearTimeout(t)}),2e3);document.getElementById("thanks").style.display="block"})).catch((e=>{l.textContent="Ошибка! Данные не отправлены",console.error(e)})).finally((()=>{t.reset()}))}))};let y;const u=(e,t)=>{let o,n=0;!0===t&&(o=document.querySelectorAll(".gallery-slider .dot"));const l=()=>{y=setInterval((()=>{h(e[n]),!0===t&&g(o[n]),n++,n>e.length-1&&(n=0),p(e[n]),!0===t&&f(o[n])}),2500)};if(l(),!0===t){const t=e[0].parentNode;o.forEach(((t,l)=>t.addEventListener("click",(t=>{t.target.matches(".dot-active")||(h(e[n]),g(o[n]),n=l,p(e[n]),f(o[n]))})))),t.addEventListener("mouseover",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&clearInterval(y)})),t.addEventListener("mouseout",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&l()})),t.addEventListener("click",(t=>{t.target.closest(".arrow-left")&&(h(e[n]),g(o[n]),n--,n<0&&(n=e.length-1),p(e[n]),f(o[n])),t.target.closest(".arrow-right")&&(h(e[n]),g(o[n]),n++,n>e.length-1&&(n=0),p(e[n]),f(o[n]))}))}},h=e=>{e.style.display="none"},p=e=>{e.style.display="flex"},g=e=>{e.classList.remove("dot-active")},f=e=>{e.classList.add("dot-active")},v=document.querySelector(".top-menu .menu-button"),k=document.querySelector(".top-menu"),E=document.querySelector(".popup-menu"),w=()=>{window.screen.availWidth<768&&(v.classList.remove("hidden-large"),v.addEventListener("click",(e=>{e.target.closest("img")&&(E.style.display="flex")})),E.addEventListener("click",(e=>{(e.target.closest(".close-menu-btn")||e.target.closest("li"))&&(E.style.display="none")})),window.addEventListener("scroll",(()=>{window.scrollY>=185&&window.screen.availWidth<768?k.classList.add("posFixed"):k.classList.remove("posFixed")})))},b=()=>{window.screen.availWidth>768&&(v.classList.add("hidden-large"),E.style.display="none")};(()=>{const e=document.getElementById("totop");window.addEventListener("scroll",(()=>{window.scrollY>=740?e.style.display="block":e.style.display=""}))})(),w(),b(),window.addEventListener("resize",(()=>{w(),b()})),(()=>{const e=document.querySelector(".head"),t=e=>{e.style.display?e.style.display="":e.style.display="block"};e.addEventListener("click",(e=>{const{target:o}=e;if(o.matches(".clubs-list p")&&(e=>{for(let o of e)"UL"===o.tagName&&t(o)})(o.parentNode.children),o.closest(".free-visit")){const e=document.getElementById("free_visit_form");t(e)}if(o.closest(".callback-btn")){const e=document.getElementById("callback_form");t(e)}})),document.body.addEventListener("click",(e=>{if(e.target.closest(".fixed-gift")){const o=document.getElementById("gift");t(o),e.target.style.display="none"}}))})(),document.querySelectorAll(".popup form").forEach((e=>{m(e.id)})),(()=>{const e=document.getElementById("banner-form");m(e.id)})(),(()=>{const e=document.getElementById("footer_form");m(e.id)})(),(()=>{const t=document.getElementById("card_order");t.addEventListener("click",(t=>{var o;t.target.closest(".time input")&&(c(+t.target.value,n),r=!1,i()),t.target.closest(".club")&&(o=t.target,n="mozaika"===o.value?e.mozaika:e.schelkovo,c(l,n),r=!1,i())})),m(t.id)})(),(()=>{const e=document.querySelector(".main-slider").children;u(e)})(),(()=>{const e=document.querySelectorAll(".gallery-slider .slide");for(let t of e)t.style.display="none";e[0].style.display="block",(e=>{const t=document.querySelector(".gallery-slider .dots");for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.append(e)}t.children[0].classList.add("dot-active")})(e),u(e,!0)})(),(()=>{const e=document.getElementById("services"),t=document.querySelectorAll("#services .arrow-slider"),o=e.querySelectorAll(".slide");let n=0,l=235;t[0].style.display="none",e.addEventListener("click",(e=>{if(e.target.matches(".arrow-left")||e.target.matches(".arrow-left img")){n--,l=235*-n;for(let e=0;e<o.length;e++)o[e].style.transform=`translateX(${l}px)`}if(e.target.matches(".arrow-right")||e.target.matches(".arrow-right img")){n++,l=235*n;for(let e=0;e<o.length;e++)o[e].style.transform=`translateX(-${l}px)`}t[0].style.display=n>0?"block":"none",n>o.length-5?t[1].style.display="none":t[1].style.display="block"}))})()})();
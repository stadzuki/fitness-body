(()=>{"use strict";const e={schelkovo:{monthPay:{oneMonth:2999,sixMonth:14990,nineMonth:21990,twelfth:24990}},mozaika:{monthPay:{oneMonth:1999,sixMonth:9900,nineMonth:13900,twelfth:19900}},promocode:"ТЕЛО2020"};let t,o=e.mozaika.monthPay.oneMonth,n=e.mozaika,l=1,s=0;const r=document.getElementById("card_order");for(let e of r)"promo"===e.name&&(t=document.getElementById("price-total"),t.textContent=o);const a=()=>{const e=document.querySelectorAll(".popup");for(let t=0;t<e.length;t++)e[t].style.display=""},c=n=>{const l=document.getElementById(n),r=l.querySelectorAll("input");document.body.addEventListener("click",(e=>{const{target:t}=e;(t.closest(".close-form")||t.closest(".overlay")||t.closest(".close-btn"))&&a()})),l.addEventListener("input",(n=>{"promo"===n.target.name&&n.target.value===e.promocode&&(o*=.3,t.textContent=Math.floor(o))})),l.addEventListener("submit",(e=>{e.preventDefault();const{target:t}=e,o=document.createElement("div");if(!(e=>{let t=!0;for(let o of e){if("name"===o.name&&!1===/^[А-я]{0,32}$/.test(o.value)){alert('Поле "имя" заполнено неправильно'),t=!1;break}if("phone"===o.name&&!1===/^\+?7[0-9]{3}[0-9]{7}$/.test(o.value)){alert('Поле "телефон" заполнено неправильно'),t=!1;break}if("checkbox"===o.type&&!1===o.checked){alert("Вы не дали право на обработку данных"),t=!1;break}if("radio"===o.type&&"club-name"===o.name&&(!1===o.checked&&(s+=1),2===s)){alert("Выберите клуб"),t=!1,s=0;break}}return t})(r))return;s=0;const n=new FormData(l),c={};n.forEach(((e,t)=>{c[t]=e})),l.appendChild(o),o.style.color="red",o.style.marginTop="20px",o.textContent="Отправка...",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}))(c).then((e=>{if(200!==e.status)throw new Error("network status not 200");o.textContent="Данные успешно отправлены";let t=setTimeout((()=>{a(),o.textContent="",clearTimeout(t)}),2e3);document.getElementById("thanks").style.display="block"})).catch((e=>{o.textContent="Ошибка! Данные не отправлены",console.error(e)})).finally((()=>{l.reset()}))}))};let d;const i=(e,t)=>{let o,n=0;!0===t&&(o=document.querySelectorAll(".gallery-slider .dot"));const l=()=>{d=setInterval((()=>{m(e[n]),!0===t&&u(o[n]),n++,n>e.length-1&&(n=0),y(e[n]),!0===t&&h(o[n])}),2500)};if(l(),!0===t){const t=e[0].parentNode;o.forEach(((t,l)=>t.addEventListener("click",(t=>{t.target.matches(".dot-active")||(m(e[n]),u(o[n]),n=l,y(e[n]),h(o[n]))})))),t.addEventListener("mouseover",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&clearInterval(d)})),t.addEventListener("mouseout",(e=>{(e.target.closest(".dot")||e.target.closest(".arrow-slider"))&&l()})),t.addEventListener("click",(t=>{t.target.closest(".arrow-left")&&(m(e[n]),u(o[n]),n--,n<0&&(n=e.length-1),y(e[n]),h(o[n])),t.target.closest(".arrow-right")&&(m(e[n]),u(o[n]),n++,n>e.length-1&&(n=0),y(e[n]),h(o[n]))}))}},m=e=>{e.style.display="none"},y=e=>{e.style.display="flex"},u=e=>{e.classList.remove("dot-active")},h=e=>{e.classList.add("dot-active")};(()=>{const e=document.getElementById("totop");window.addEventListener("scroll",(()=>{window.scrollY>=740?e.style.display="block":e.style.display=""}))})(),(()=>{const e=document.querySelector(".top-menu .menu-button"),t=document.querySelector(".top-menu"),o=document.querySelector(".popup-menu");window.screen.availWidth<768&&(e.classList.remove("hidden-large"),e.addEventListener("click",(()=>{o.style.display="flex"})),o.addEventListener("click",(e=>{(e.target.closest(".close-menu-btn")||e.target.closest("li"))&&(o.style.display="none")})),window.addEventListener("scroll",(()=>{window.scrollY>=185?t.classList.add("posFixed"):t.classList.remove("posFixed")})))})(),(()=>{const e=document.querySelector(".head"),t=e=>{e.style.display?e.style.display="":e.style.display="block"};e.addEventListener("click",(e=>{const{target:o}=e;if(o.matches(".clubs-list p")&&(e=>{for(let o of e)"UL"===o.tagName&&t(o)})(o.parentNode.children),o.closest(".free-visit")){const e=document.getElementById("free_visit_form");t(e)}if(o.closest(".callback-btn")){const e=document.getElementById("callback_form");t(e)}})),document.body.addEventListener("click",(e=>{if(e.target.closest(".fixed-gift")){const o=document.getElementById("gift");t(o),e.target.style.display="none"}}))})(),document.querySelectorAll(".popup form").forEach((e=>{c(e.id)})),(()=>{const e=document.getElementById("banner-form");c(e.id)})(),(()=>{const e=document.getElementById("footer_form");c(e.id)})(),(()=>{const s=document.getElementById("card_order"),r=(e,n)=>{switch(e){case 1:o=n.monthPay.oneMonth,l=1;break;case 6:o=n.monthPay.sixMonth,l=6;break;case 9:o=n.monthPay.nineMonth,l=9;break;case 12:o=n.monthPay.twelfth,l=12}t.textContent=o};s.addEventListener("click",(t=>{var o;t.target.closest(".time input")&&r(+t.target.value,n),t.target.closest(".club")&&(o=t.target,n="mozaika"===o.value?e.mozaika:e.schelkovo,r(l,n))})),c(s.id)})(),(()=>{const e=document.querySelector(".main-slider").children;i(e)})(),(()=>{const e=document.querySelectorAll(".gallery-slider .slide");for(let t of e)t.style.display="none";e[0].style.display="block",(e=>{const t=document.querySelector(".gallery-slider .dots");for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.append(e)}t.children[0].classList.add("dot-active")})(e),i(e,!0)})(),(()=>{const e=document.getElementById("services"),t=document.querySelectorAll("#services .arrow-slider"),o=e.querySelectorAll(".slide");let n=0,l=235;t[0].style.display="none",e.addEventListener("click",(e=>{if(e.target.matches(".arrow-left")||e.target.matches(".arrow-left img")){n--,l=235*-n;for(let e=0;e<o.length;e++)o[e].style.transform=`translateX(${l}px)`}if(e.target.matches(".arrow-right")||e.target.matches(".arrow-right img")){n++,l=235*n;for(let e=0;e<o.length;e++)o[e].style.transform=`translateX(-${l}px)`}t[0].style.display=n>0?"block":"none",n>o.length-5?t[1].style.display="none":t[1].style.display="block"}))})()})();